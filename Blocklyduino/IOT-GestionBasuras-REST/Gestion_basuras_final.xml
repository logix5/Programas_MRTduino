<xml xmlns="http://www.w3.org/1999/xhtml"><block type="arduino_setup" x="0" y="0"><statement name="MySetup"><block type="iot_init_iot"><field name="PINBAUDIOS">9600</field><next><block type="iot_init_thinkspeak"><value name="APIwrite"><shadow type="text"><field name="TEXT">7MWRTNYIWQ3T3E0X</field></shadow></value><next><block type="serial_init"><field name="PINBAUDIOS">115200</field><next><block type="iot_configmode_esp8266"><field name="MODE">1</field><field name="LOGIC">TRUE</field><value name="delaytime"><shadow type="math_number"><field name="NUM">3000</field></shadow></value><next><block type="iot_confignetwork_esp8266"><field name="LOGIC">TRUE</field><value name="ssid"><shadow type="text"><field name="TEXT">name net</field></shadow><block type="text"><field name="TEXT">MOVISTAR_F0A9</field></block></value><value name="password"><shadow type="text"><field name="TEXT">******</field></shadow><block type="text"><field name="TEXT">x2Hz25Y7pwYYJBMsFgKz</field></block></value><value name="delaytime"><shadow type="math_number"><field name="NUM">3000</field></shadow><block type="math_number"><field name="NUM">5000</field></block></value><next><block type="variables_declare"><field name="VAR">Estado</field><field name="TYPE">unsigned int</field><value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value><next><block type="variables_declare"><field name="VAR">Detectado</field><field name="TYPE">long</field><value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="MyLoop"><block type="tempo_no_delay"><field name="unit">s</field><value name="DELAY_TIME"><shadow type="math_number"><field name="NUM">5</field></shadow><block type="math_number"><field name="NUM">15</field></block></value><statement name="branch"><block type="controls_switch"><mutation casebreak="4"></mutation><value name="SWVAR"><block type="variables_get"><field name="VAR">Estado</field></block></value><value name="CASE0"><block type="math_number"><field name="NUM">0</field></block></value><statement name="DO0"><block type="iot_sendthinkspeak_esp8266"><field name="LOGIC">TRUE</field><value name="field"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="value"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="dht_sensor"><field name="PIN_DHT">5</field><field name="OUTPUT_TYPE">0</field><field name="OUTPUT_VALUE">0</field></block></value><next><block type="variables_set"><field name="VAR">Estado</field><value name="VALUE"><block type="math_number"><field name="NUM">1</field></block></value></block></next></block></statement><value name="CASE1"><block type="math_number"><field name="NUM">1</field></block></value><statement name="DO1"><block type="iot_sendthinkspeak_esp8266"><field name="LOGIC">TRUE</field><value name="field"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_number"><field name="NUM">2</field></block></value><value name="value"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="dht_sensor"><field name="PIN_DHT">5</field><field name="OUTPUT_TYPE">0</field><field name="OUTPUT_VALUE">1</field></block></value><next><block type="variables_set"><field name="VAR">Estado</field><value name="VALUE"><block type="math_number"><field name="NUM">2</field></block></value></block></next></block></statement><value name="CASE2"><block type="math_number"><field name="NUM">2</field></block></value><statement name="DO2"><block type="iot_sendthinkspeak_esp8266"><field name="LOGIC">TRUE</field><value name="field"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_number"><field name="NUM">3</field></block></value><value name="value"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="ultrasonic_ranger_sensor"><field name="PIN_TRIG">15</field><field name="PIN_ECHO">16</field></block></value><next><block type="variables_set"><field name="VAR">Estado</field><value name="VALUE"><block type="math_number"><field name="NUM">3</field></block></value></block></next></block></statement><value name="CASE3"><block type="math_number"><field name="NUM">3</field></block></value><statement name="DO3"><block type="iot_sendthinkspeak_esp8266"><field name="LOGIC">TRUE</field><value name="field"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_number"><field name="NUM">4</field></block></value><value name="value"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="Gas_sensor"><field name="PIN_GAS">A9</field><field name="OUTPUT_VALUE">0</field></block></value><next><block type="variables_set"><field name="VAR">Estado</field><value name="VALUE"><block type="math_number"><field name="NUM">4</field></block></value></block></next></block></statement><value name="CASE4"><block type="math_number"><field name="NUM">4</field></block></value><statement name="DO4"><block type="iot_sendthinkspeak_esp8266"><field name="LOGIC">TRUE</field><value name="field"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="math_number"><field name="NUM">5</field></block></value><value name="value"><shadow type="math_number"><field name="NUM">1</field></shadow><block type="variables_get"><field name="VAR">Detectado</field></block></value><next><block type="variables_set"><field name="VAR">Estado</field><value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value></block></next></block></statement></block></statement><next><block type="controls_if"><value name="IF0"><block type="logic_operation"><field name="OP">AND</field><value name="A"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="variables_get"><field name="VAR">Detectado</field></block></value><value name="B"><block type="math_number"><field name="NUM">0</field></block></value></block></value><value name="B"><block type="logic_negate"><value name="BOOL"><block type="Flame_status_sensor"><field name="PIN_FLAME">18</field></block></value></block></value></block></value><statement name="DO0"><block type="serial_print"><value name="CONTENT"><shadow type="text"><field name="TEXT">text</field></shadow><block type="text"><field name="TEXT">Llama detectada</field></block></value><next><block type="variables_set"><field name="VAR">Estado</field><value name="VALUE"><block type="math_number"><field name="NUM">4</field></block></value><next><block type="variables_set"><field name="VAR">Detectado</field><value name="VALUE"><block type="math_number"><field name="NUM">1</field></block></value><next><block type="base_delayms"><value name="DELAY_TIME"><shadow type="math_number"><field name="NUM">1000</field></shadow><block type="math_number"><field name="NUM">100</field></block></value></block></next></block></next></block></next></block></statement><next><block type="controls_if"><value name="IF0"><block type="logic_operation"><field name="OP">AND</field><value name="A"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="variables_get"><field name="VAR">Detectado</field></block></value><value name="B"><block type="math_number"><field name="NUM">1</field></block></value></block></value><value name="B"><block type="Flame_status_sensor"><field name="PIN_FLAME">18</field></block></value></block></value><statement name="DO0"><block type="serial_print"><value name="CONTENT"><shadow type="text"><field name="TEXT">text</field></shadow><block type="text"><field name="TEXT">No hay llama</field></block></value><next><block type="variables_set"><field name="VAR">Detectado</field><value name="VALUE"><block type="math_number"><field name="NUM">0</field></block></value><next><block type="base_delayms"><value name="DELAY_TIME"><shadow type="math_number"><field name="NUM">1000</field></shadow><block type="math_number"><field name="NUM">100</field></block></value></block></next></block></next></block></statement></block></next></block></next></block></statement></block></xml>